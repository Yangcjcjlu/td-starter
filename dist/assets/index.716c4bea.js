import{R as O,ab as ne,a9 as oe,n as se,r as c,o as Re,p as y,x as $e,C as Ge,a as W,c as k,F as be,j as n,bx as ve,q as b,ar as Te,a7 as Fe,by as Me,bd as We,A as pe}from"./index.9fcbf863.js";import{o as ke}from"./observe.3c3f0282.js";import{a as Ke,I as qe}from"./image.ef16102a.js";/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var te=O.createContext("default"),fe=function(a){var r=a.children,e=a.size;return O.createElement(te.Consumer,null,function(l){return O.createElement(te.Provider,{value:e||l},r)})};/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var He={hideOnLoadFailed:!1,shape:"circle"},Ze={cascading:"right-up"};/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var Ve={fit:"fill",gallery:!1,lazy:!1,overlayTrigger:"always",position:"center",shape:"square"};/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var Be=["className","src","style","alt","fit","position","shape","placeholder","loading","error","overlayTrigger","lazy","gallery","overlayContent","srcset","onLoad","onError"];function ge(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),r.push.apply(r,e)}return r}function me(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ge(Object(r),!0).forEach(function(e){b(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Je=function(a,r){var e=ne(a,Ve),l=e.className,f=e.src,i=e.style,_=e.alt,S=e.fit,D=e.position,v=e.shape,P=e.placeholder,G=e.loading,T=e.error,I=e.overlayTrigger,g=e.lazy,x=e.gallery,j=e.overlayContent,E=e.srcset,w=e.onLoad,m=e.onError,A=oe(e,Be),J=se(),o=J.classPrefix,p=c.exports.useRef(null),K=Re("image"),q=y(K,2),h=q[0],R=q[1],N=$e({ImageErrorIcon:Ke,ImageIcon:qe}),u=N.ImageErrorIcon,F=N.ImageIcon;O.useImperativeHandle(r,function(){return p.current});var H=c.exports.useMemo(function(){return Ge(h.replaceImageSrc)?h.replaceImageSrc(e):f},[f,h,e]),Q=c.exports.useState(!g),Z=y(Q,2),C=Z[0],U=Z[1],X=function(){U(!0)},M=c.exports.useState(!1),V=y(M,2),$=V[0],Y=V[1],ee=function(d){Y(!0),w==null||w({e:d})};c.exports.useEffect(function(){if(!(!g||!(p!=null&&p.current))){var s=null,d=ke(p.current,null,X,0);return s=p.current,function(){s&&d&&d.unobserve(s)}}},[g,p]);var L=c.exports.useState(!1),z=y(L,2),re=z[0],xe=z[1],je=function(d){xe(!0),m==null||m({e:d})},ae=I==="hover",Ee=c.exports.useState(!ae),ce=y(Ee,2),we=ce[0],Ne=ce[1],le=function(d){Ne(d)},Ce=function(){return j?n("div",{className:k("".concat(o,"-image__overlay-content"),!we&&"".concat(o,"-image__overlay-content--hidden")),children:j}):null},Le=function(){return P?n("div",{className:"".concat(o,"-image__placeholder"),children:P}):null},ze=function(){return x?n("div",{className:"".concat(o,"-image__gallery-shadow")}):null},ie=function(d){return n("img",{src:d,onError:je,onLoad:ee,className:k("".concat(o,"-image"),"".concat(o,"-image--fit-").concat(S),"".concat(o,"-image--position-").concat(D)),alt:_})},De=function(){return W("picture",{children:[Object.entries(e.srcset).map(function(d){var ue=y(d,2),Ae=ue[0],de=ue[1];return n("source",{type:Ae,srcSet:de},de)}),e.src&&ie(e.src)]})};return W("div",{...me(me({ref:p,className:k("".concat(o,"-image__wrapper"),"".concat(o,"-image__wrapper--shape-").concat(v),x&&"".concat(o,"-image__wrapper--gallery"),ae&&"".concat(o,"-image__wrapper--need-hover"),l),style:i},ae?{onMouseEnter:function(){return le(!0)},onMouseLeave:function(){return le(!1)}}:null),A),children:[Le(),ze(),!(re||!C)&&W(be,{children:[E&&Object.keys(E).length?De():ie(H),!(re||!C)&&!$&&n("div",{className:"".concat(o,"-image__loading"),children:G||W(ve,{direction:"vertical",size:8,align:"center",children:[n(F,{size:24}),R(h.loadingText)]})})]}),re&&n("div",{className:"".concat(o,"-image__error"),children:T||W(ve,{direction:"vertical",size:8,align:"center",children:[n(u,{size:24}),R(h.errorText)]})}),Ce()]})},_e=O.forwardRef(Je);_e.displayName="Image";/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var Qe=_e;/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var Ue=["className","cascading","collapseAvatar","max","size","children"];function he(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),r.push.apply(r,e)}return r}function ye(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?he(Object(r),!0).forEach(function(e){b(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Se=function(a){var r,e=se(),l=e.classPrefix,f="".concat(l,"-avatar"),i=ne(a,Ze),_=i.className,S=i.cascading,D=i.collapseAvatar,v=i.max,P=i.size,G=i.children,T=oe(i,Ue),I=O.Children.toArray(G),g;I.length>0&&(g=I.map(function(m,A){return O.cloneElement(m,ye({key:"avatar-group-item-".concat(A)},m.props))}));var x=k("".concat(f,"-group"),_,(r={},b(r,"".concat(f,"--offset-right"),S==="right-up"),b(r,"".concat(f,"--offset-left"),S==="left-up"),r)),j=I.length;if(v&&j>v){var E=g.slice(0,v),w=O.createElement(Ie,{className:"".concat(f,"__collapse")},Fe(D)||"+".concat(j-v));return E.push(n(be,{children:w})),n(fe,{size:P,children:n("div",{className:x,children:E})})}return n(fe,{size:P,children:n("div",{...ye({className:x},T),children:g})})};Se.displayName="AvatarGroup";var Xe=["alt","hideOnLoadFailed","icon","image","shape","size","onError","children","content","style","imageProps","className"];function Oe(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),r.push.apply(r,e)}return r}function B(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Oe(Object(r),!0).forEach(function(e){b(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Pe=Te(function(t,a){var r,e=ne(t,He),l=e.alt,f=e.hideOnLoadFailed,i=e.icon,_=e.image,S=e.shape,D=e.size,v=e.onError,P=e.children,G=e.content,T=e.style,I=e.imageProps,g=e.className,x=oe(e,Xe),j=c.exports.useContext(te),E=se(),w=E.classPrefix,m=c.exports.useState(1),A=y(m,2),J=A[0],o=A[1],p=c.exports.useState(!0),K=y(p,2),q=K[0],h=K[1],R=c.exports.useRef(null),N=c.exports.useRef(null),u=D===void 0?j:D,F=4,H=function(){if(!(!N.current||!R.current)){var L=N.current.offsetWidth,z=R.current.offsetWidth;L!==0&&z!==0&&F*2<z&&o(z-F*2<L?(z-F*2)/L:1)}};Me(N.current,H);var Q=function(L){v==null||v(L),!f&&h(!1)};c.exports.useEffect(function(){h(!0),o(1)},[_]),c.exports.useEffect(function(){H()},[]);var Z=We(),C=Z.SIZE,U=u&&!C[u]?{width:u,height:u,fontSize:"".concat(Number.parseInt(u,10)/2,"px")}:{},X=u&&!C[u]?{width:u,height:u}:{},M="".concat(w,"-avatar"),V=k(M,g,(r={},b(r,C[u],!!C[u]),b(r,"".concat(M,"--").concat(S),!!S),b(r,"".concat(M,"__icon"),!!i),r)),$;if(_&&q)$=n(Qe,{...B({src:_,alt:l,style:X,onError:Q},I)});else if(i)$=i;else{var Y={transform:"scale(".concat(J,")")};$=n("span",{ref:pe(a,N),style:Y,children:P||G})}return n("div",{...B({ref:pe(a,R),className:V,style:B(B({},U),T)},x),children:$})},{Group:Se});Pe.displayName="Avatar";var Ie=Pe;/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var ar=Ie;export{ar as A};
