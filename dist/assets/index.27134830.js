import{c7 as j,c8 as K,r as i,b as x,d as E,c9 as z,j as e,c as v,e as N,ca as G,cb as M,a as p,F as I,B as h,aK as f,u as $,R as L,cc as H,bB as J}from"./index.3351b187.js";import{C}from"./common.module.d7e709a7.js";import{M as D}from"./index.f5c7c735.js";import{L as V,F as A}from"./index.aab392cb.js";import{T as X}from"./index.86c947ec.js";import{T as Q}from"./index.d87d38b6.js";import{C as U,S as w}from"./check-circle-filled.c46602ba.js";import{T as Y}from"./index.31560def.js";import"./formModel.f85a2eeb.js";import"./react-render.fd0d8019.js";import"./image.5638e666.js";import"./DateRangePicker.82c5e679.js";import"./index.04097e95.js";import"./useDebounce.33f0dc6f.js";import"./observe.3c3f0282.js";const O="datasource/listSelect",k={loading:!0,current:1,pageSize:10,total:0,datasourceList:[]},S=j(`${O}/getMockList`,async o=>{const t=new Promise((s,l)=>{s(o.list)});let u=null;return await t.then(s=>{u=s}),{list:u,total:0,pageSize:o.pageSize,current:o.current}});K({name:O,initialState:k,reducers:{clearPageState:()=>k},extraReducers:o=>{o.addCase(S.pending,t=>{t.loading=!0}).addCase(S.fulfilled,(t,u)=>{var s,l,r,d;console.log("action!"),console.log(u),console.log("state"),console.log(t),t.loading=!1,t.datasourceList=((s=u.payload)==null?void 0:s.list)||[],t.total=(l=u.payload)==null?void 0:l.total,t.pageSize=(r=u.payload)==null?void 0:r.pageSize,t.current=(d=u.payload)==null?void 0:d.current}).addCase(S.rejected,t=>{t.loading=!1})}});const Z=o=>o.ListSelectDataSource;const W=o=>{const{deleteColumn:t}=o,u=x();i.exports.useRef(null);const s=new Array(5).fill(null).map((n,a)=>({id:String(a+1),goldTable:["table1","table2","table3"][a%3],status:a%3,goldColumn:["column1","column2","column3","column4","column5"][a%4],letters:[["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528","algolia \u670D\u52A1\u62A5\u9500"]][a%4],createTime:["2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01"][a%4]})),[l,r]=i.exports.useState([...s]),[d,m]=i.exports.useState({}),{goldTableColumnList:c}=o;i.exports.useEffect(()=>{r(c.data||[...s])},[c]);const g=n=>n.index!==2,P=n=>{console.log(n);const{id:a}=n.currentTarget.dataset;t(a)},R=i.exports.useMemo(()=>[{title:"Table name",colKey:"goldTable",align:"left",edit:{component:E,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:n=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",n)},onEnter:a=>{var b;(b=a==null?void 0:a.e)==null||b.preventDefault(),console.log("onEnter",a)}}),abortEditOnEvent:["onEnter"],onEdited:n=>{l.splice(n.rowIndex,1,n.newRowData),r([...l]),console.log("Edit firstName:",n),D.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!0},{title:"column name",colKey:"goldColumn",align:"left",edit:{component:E,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:n=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",n)},onEnter:a=>{var b;(b=a==null?void 0:a.e)==null||b.preventDefault(),console.log("onEnter",a)}}),abortEditOnEvent:["onEnter"],onEdited:n=>{l.splice(n.rowIndex,1,n.newRowData),r([...l]),console.log("Edit firstName:",n),D.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!1},{title:"distribution name",colKey:"distributionName",width:280,edit:{component:E,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:n=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",n)},onEnter:a=>{var b;(b=a==null?void 0:a.e)==null||b.preventDefault(),console.log("onEnter",a)}}),abortEditOnEvent:["onEnter"],onEdited:n=>{console.log("context==>"+n),console.log("data=>"+JSON.stringify(l)),u(z(l)),r([...l]),console.log("Edit firstName:",n),D.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!0},{title:"Operation",colKey:"operate",cell:({row:n})=>e("div",{className:"table-operations",children:e("div",{children:e(V,{theme:"primary",hover:"color","data-id":n.id,onClick:P,children:"delete"})})})}],[l,d]);return e(X,{rowKey:"key",columns:R,data:l,editableCellState:g,bordered:!0,lazyLoad:!0})},ee=()=>e("div",{className:v(C.pageWithPadding,C.pageWithColor),children:e(W,{})});i.exports.memo(ee);var te=i.exports.memo(o=>{const{callback:t}=o,{goldTableId:u}=o,s=()=>{t("next")},l=N(G),r=x(),{goldTableColumnList:d}=l,m=g=>{};return i.exports.useEffect(()=>(console.log("goldTableId==>"),console.log(u),r(M(u)),()=>{}),[u]),p(I,{children:[e(W,{goldTableColumnList:d,deleteColumn:m}),e("div",{style:{marginTop:"10px"},children:e(h,{type:"submit",onClick:()=>s(),children:"Next Step"})})]})});const{FormItem:y}=A;var ue=i.exports.memo(o=>{const{current:t,callback:u,steps:s=[]}=o,{Option:l}=f,r=()=>{D.success("Success")},d=()=>{u("back")};return p(A,{labelWidth:100,children:[e(y,{label:"Distribution Name",name:"distributionName",children:e(E,{style:{marginLeft:20},placeholder:"Please Enter"})}),e(y,{label:"Distribution Type",name:"distributionType",children:p(f,{style:{marginLeft:20},value:"A",placeholder:"please select distribution type",children:[e(l,{label:"CSV",value:"A"},"A"),e(l,{label:"EXCEL",value:"B"},"B"),e(l,{label:"\u516C\u53F8C",value:"C"},"C")]})}),p(y,{children:[e(h,{type:"submit",onClick:()=>r(),children:"Submit"}),e(h,{style:{margin:"0 8px"},onClick:()=>d(),children:"Go back"})]})]})});const{FormItem:F}=A,{Option:le}=f,oe=[{label:"\u5E7F\u4E1C\u7701\u6DF1\u5733\u5E02\u5357\u5C71\u533A",value:"0"},{label:"\u5317\u4EAC\u5E02\u6D77\u6DC0\u533A",value:"1"},{label:"\u56DB\u5DDD\u7701\u6210\u90FD\u5E02\u9AD8\u65B0\u533A",value:"2"},{label:"\u5E7F\u4E1C\u7701\u5E7F\u5DDE\u5E02\u5929\u6CB3\u533A",value:"3"},{label:"\u9655\u897F\u7701\u897F\u5B89\u5E02\u9AD8\u65B0\u533A",value:"4"}];var ne=i.exports.memo(o=>{const{current:t,callback:u,steps:s}=o,l=()=>{u("next")},r=()=>{u("back")};return p(A,{labelWidth:100,children:[e(F,{label:"\u6536\u8D27\u4EBA",name:"receiver",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA",type:"error"}],children:e(E,{placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA"})}),e(F,{label:"\u6536\u8D27\u4EBA\u624B\u673A\u53F7",name:"receiverPhone",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u624B\u673A\u53F7",type:"error"}],children:e(E,{placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u624B\u673A\u53F7\u53F7"})}),e(F,{label:"\u6536\u8D27\u5730\u5740",name:"receiverAddress",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740",type:"error"}],children:e(f,{value:"3",placeholder:"\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740",children:oe.map(d=>{const{label:m,value:c}=d;return e(le,{label:m,value:c},c)})})}),e(F,{label:"\u8BE6\u7EC6\u5730\u5740",name:"taxpayerId",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",type:"error"}],children:e(Q,{placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",value:"\u54C8\u54C8\u54C8"})}),p(F,{children:[t<s.length-1&&e(h,{type:"submit",onClick:()=>l(),children:"\u4E0B\u4E00\u6B65"}),t>0&&e(h,{style:{margin:"0 8px"},onClick:()=>r(),children:"\u4E0A\u4E00\u6B65"})]})]})});const ae="_stepFourWrapper_27q4d_1",se="_icon_27q4d_4",re="_title_27q4d_8";var T={stepFourWrapper:ae,icon:se,title:re};i.exports.memo(o=>{const t=$(),{callback:u}=o,s=()=>{u("first")},l=()=>{t("/detail/advanced")};return e("div",{className:T.stepFourWrapper,children:p("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e(U,{className:T.icon}),e("div",{className:T.title,children:"\u5B8C\u6210\u5F00\u7968\u7533\u8BF7"}),e("p",{children:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5\u4F1A\u5C06\u7535\u5B50\u53D1\u7968\u53D1\u81F3\u90AE\u7BB1\uFF0C\u53D1\u7968\u90AE\u5BC4\u8BF7\u8010\u5FC3\u7B49\u5F85"}),p("div",{className:"tdesign-demo-block-column",style:{marginTop:"20px"},children:[e(h,{theme:"primary",variant:"base",onClick:s,children:"\u518D\u6B21\u7533\u8BF7"}),e(h,{theme:"default",variant:"base",style:{marginLeft:"15px"},onClick:l,children:"\u67E5\u770B\u8FDB\u5EA6"})]})]})})});const{StepItem:ce}=w,_=[{title:"Edit mapping ",content:"\u7533\u8BF7\u63D0\u4EA4\u5DF2\u4E8E12\u670821\u65E5\u63D0\u4EA4",component:te},{title:"Edit Distribution Info ",content:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5",component:ue},{title:"Submit",content:"\u7535\u5B50\u53D1\u7968\u5F00\u51FA\u540E7\u4E2A\u5DE5\u4F5C\u65E5\u5185\u8054\u7CFB",component:ne}],q=o=>{const[t,u]=L.useState(0),s=_[t].component,{goldTableId:l}=o,r=()=>{u(t+1)},d=()=>{u(t-1)},m=c=>{switch(c){case"back":d();break;case"next":r();break;case"first":u(0);break}};return e("div",{className:v(C.pageWithPadding,C.pageWithColor),children:p(I,{children:[e(w,{current:t,children:_.map(c=>e(ce,{title:c.title},c.title))}),e("div",{style:{marginTop:"52px"},children:e(s,{steps:_,current:t,callback:m,goldTableId:l})})]})})},ie=()=>e("div",{className:v(C.pageWithPadding,C.pageWithColor),children:e(q,{})});i.exports.memo(ie);const de="_content_1f133_1",pe="_treeContent_1f133_4",me="_search_1f133_9",ge="_tableContent_1f133_12";var B={content:de,treeContent:pe,search:me,tableContent:ge};const be=()=>H["release"].API,Ee=async o=>{let u=`${be()}api/v1/goldTable`;o&&o.name&&(u+=`?tableName=${o.name}`);const l=await(await fetch(u)).json();return console.log("gold LIST resp==>"),console.log(l),l},he=()=>{const[o,t]=i.exports.useState([]);i.exports.useState([]);const[u,s]=i.exports.useState(0);i.exports.useState(0);const l=i.exports.useRef(null);N(Z);const r=[];i.exports.useEffect(()=>{Ee({name:null}).then(c=>{for(let g=0;g<c.length;g++)r.push({label:c[g].goldTable,value:c[g].id,key:c[g].id});t(r)})},[]);const d=m=>{const c=m.node.data.value;s(c)};return p("div",{className:v(C.pageWithColor,B.content),children:[p("div",{className:B.treeContent,children:[e(E,{className:B.search,suffixIcon:e(J,{}),placeholder:"please search for source/"}),e(Y,{data:o,onClick:d,activable:!0,hover:!0,transition:!0,ref:l})]}),e("div",{className:B.tableContent,children:u&&u!=0?e(q,{goldTableId:u}):null})]})};var Le=L.memo(he);export{Le as default};
