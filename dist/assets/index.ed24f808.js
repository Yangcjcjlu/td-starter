import{c3 as j,c4 as K,r as c,b as y,d as F,c5 as z,j as e,c as T,a as C,F as O,B,e as L,c6 as M,aK as S,c7 as $,u as H,R as P,c8 as J,c9 as V,ca as X,cb as Q,bA as U,cc as Y}from"./index.19bfeeed.js";import{C as D}from"./common.module.d7e709a7.js";import{M as A}from"./index.519b908b.js";import{L as Z,F as _}from"./index.4a66917e.js";import{T as ee}from"./index.a75d467a.js";import{T as te,C as ue,S as W}from"./check-circle-filled.ba656d20.js";import{T as le}from"./index.a9069e64.js";import"./formModel.0c8699f8.js";import"./react-render.7e1f28d7.js";import"./image.8032b9d1.js";import"./DateRangePicker.08192b95.js";import"./index.99269c33.js";import"./useDebounce.8fbc15d5.js";import"./observe.3c3f0282.js";const q="datasource/listSelect",w={loading:!0,current:1,pageSize:10,total:0,datasourceList:[]},k=j(`${q}/getMockList`,async l=>{const u=new Promise((r,s)=>{r(l.list)});let o=null;return await u.then(r=>{o=r}),{list:o,total:0,pageSize:l.pageSize,current:l.current}});K({name:q,initialState:w,reducers:{clearPageState:()=>w},extraReducers:l=>{l.addCase(k.pending,u=>{u.loading=!0}).addCase(k.fulfilled,(u,o)=>{var r,s,a,i;console.log("action!"),console.log(o),console.log("state"),console.log(u),u.loading=!1,u.datasourceList=((r=o.payload)==null?void 0:r.list)||[],u.total=(s=o.payload)==null?void 0:s.total,u.pageSize=(a=o.payload)==null?void 0:a.pageSize,u.current=(i=o.payload)==null?void 0:i.current}).addCase(k.rejected,u=>{u.loading=!1})}});const oe=l=>l.ListSelectDataSource;const R=l=>{const{deleteColumn:u,getCurrentColumnList:o}=l,r=y();c.exports.useRef(null);const s=new Array(5).fill(null).map((t,n)=>({id:String(n+1),goldTable:["table1","table2","table3"][n%3],status:n%3,goldColumn:["column1","column2","column3","column4","column5"][n%4],letters:[["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528","algolia \u670D\u52A1\u62A5\u9500"]][n%4],createTime:["2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01"][n%4]})),[a,i]=c.exports.useState([...s]),[b,m]=c.exports.useState({}),{goldTableColumnList:E}=l;c.exports.useEffect(()=>{i(E||[...s])},[E]),c.exports.useEffect(()=>{o(E)},[E]);const g=t=>t.index!==2,p=t=>{console.log(t);const{id:n}=t.currentTarget.dataset;u(n)},d=c.exports.useMemo(()=>[{title:"Table name",colKey:"goldTable",align:"left",edit:{component:F,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:t=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",t)},onEnter:n=>{var h;(h=n==null?void 0:n.e)==null||h.preventDefault(),console.log("onEnter",n)}}),abortEditOnEvent:["onEnter"],onEdited:t=>{a.splice(t.rowIndex,1,t.newRowData),i([...a]),console.log("Edit firstName:",t),A.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!0},{title:"column name",colKey:"goldColumn",align:"left",edit:{component:F,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:t=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",t)},onEnter:n=>{var h;(h=n==null?void 0:n.e)==null||h.preventDefault(),console.log("onEnter",n)}}),abortEditOnEvent:["onEnter"],onEdited:t=>{a.splice(t.rowIndex,1,t.newRowData),i([...a]),console.log("Edit firstName:",t),A.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!1},{title:"distribution name",colKey:"distributionName",width:280,edit:{component:F,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:t=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",t)},onEnter:n=>{var h;(h=n==null?void 0:n.e)==null||h.preventDefault(),console.log("onEnter",n)}}),abortEditOnEvent:["onEnter"],onEdited:t=>{console.log("context==>"+JSON.stringify(t)),console.log("data=>"+JSON.stringify(a)),r(z(a,t.rowIndex,t.newRowData)),i([...a]),console.log("Edit firstName:",t),A.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!0},{title:"Operation",colKey:"operate",cell:({row:t})=>e("div",{className:"table-operations",children:e("div",{children:e(Z,{theme:"primary",hover:"color","data-id":t.id,onClick:p,children:"delete"})})})}],[a,b]);return e(ee,{rowKey:"key",columns:d,data:a,editableCellState:g,bordered:!0,lazyLoad:!0})},ae=()=>e("div",{className:T(D.pageWithPadding,D.pageWithColor),children:e(R,{})});c.exports.memo(ae);var ne=c.exports.memo(l=>{const{callback:u,removeinfo:o}=l,{goldTableId:r,goldTableName:s,goldTableColumnList:a}=l,i=()=>{u("next")};return C(O,{children:[e(R,{goldTableColumnList:a,deleteColumn:g=>{o()},getCurrentColumnList:g=>{console.log("getCurrentColumnList==>"),console.log(JSON.stringify)}}),e("div",{style:{marginTop:"10px"},children:e(B,{type:"submit",onClick:()=>i(),children:"Next Step"})})]})});const{FormItem:x}=_;var se=c.exports.memo(l=>{const{current:u,callback:o,steps:r=[],goldTableName:s,goldTableId:a}=l,i=y();L(M);const b=c.exports.useRef(),{Option:m}=S,E=()=>{var d,t;const p=(t=(d=b.current)==null?void 0:d.getFieldsValue)==null?void 0:t.call(d,!0);p.goldTableId=a,p.goldTableName=s,i($(p)),A.success("Success")},g=()=>{o("back")};return C(_,{ref:b,labelWidth:100,children:[e(x,{label:"Distribution Name",name:"subscr",children:e(F,{style:{marginLeft:20},placeholder:"Please Enter"})}),e(x,{label:"Distribution Type",name:"distributionType",children:C(S,{style:{marginLeft:20},value:"A",placeholder:"please select distribution type",children:[e(m,{label:"CSV",value:"A"},"A"),e(m,{label:"EXCEL",value:"B"},"B"),e(m,{label:"PDF",value:"C"},"C")]})}),C(x,{children:[e(B,{type:"submit",onClick:()=>E(),children:"Submit"}),e(B,{style:{margin:"0 8px"},onClick:()=>g(),children:"Go back"})]})]})});const{FormItem:f}=_,{Option:re}=S,ce=[{label:"\u5E7F\u4E1C\u7701\u6DF1\u5733\u5E02\u5357\u5C71\u533A",value:"0"},{label:"\u5317\u4EAC\u5E02\u6D77\u6DC0\u533A",value:"1"},{label:"\u56DB\u5DDD\u7701\u6210\u90FD\u5E02\u9AD8\u65B0\u533A",value:"2"},{label:"\u5E7F\u4E1C\u7701\u5E7F\u5DDE\u5E02\u5929\u6CB3\u533A",value:"3"},{label:"\u9655\u897F\u7701\u897F\u5B89\u5E02\u9AD8\u65B0\u533A",value:"4"}];var ie=c.exports.memo(l=>{const{current:u,callback:o,steps:r}=l,s=()=>{o("next")},a=()=>{o("back")};return C(_,{labelWidth:100,children:[e(f,{label:"\u6536\u8D27\u4EBA",name:"receiver",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA",type:"error"}],children:e(F,{placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA"})}),e(f,{label:"\u6536\u8D27\u4EBA\u624B\u673A\u53F7",name:"receiverPhone",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u624B\u673A\u53F7",type:"error"}],children:e(F,{placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u624B\u673A\u53F7\u53F7"})}),e(f,{label:"\u6536\u8D27\u5730\u5740",name:"receiverAddress",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740",type:"error"}],children:e(S,{value:"3",placeholder:"\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740",children:ce.map(i=>{const{label:b,value:m}=i;return e(re,{label:b,value:m},m)})})}),e(f,{label:"\u8BE6\u7EC6\u5730\u5740",name:"taxpayerId",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",type:"error"}],children:e(te,{placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",value:"\u54C8\u54C8\u54C8"})}),C(f,{children:[u<r.length-1&&e(B,{type:"submit",onClick:()=>s(),children:"\u4E0B\u4E00\u6B65"}),u>0&&e(B,{style:{margin:"0 8px"},onClick:()=>a(),children:"\u4E0A\u4E00\u6B65"})]})]})});const de="_stepFourWrapper_27q4d_1",pe="_icon_27q4d_4",me="_title_27q4d_8";var N={stepFourWrapper:de,icon:pe,title:me};c.exports.memo(l=>{const u=H(),{callback:o}=l,r=()=>{o("first")},s=()=>{u("/detail/advanced")};return e("div",{className:N.stepFourWrapper,children:C("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e(ue,{className:N.icon}),e("div",{className:N.title,children:"\u5B8C\u6210\u5F00\u7968\u7533\u8BF7"}),e("p",{children:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5\u4F1A\u5C06\u7535\u5B50\u53D1\u7968\u53D1\u81F3\u90AE\u7BB1\uFF0C\u53D1\u7968\u90AE\u5BC4\u8BF7\u8010\u5FC3\u7B49\u5F85"}),C("div",{className:"tdesign-demo-block-column",style:{marginTop:"20px"},children:[e(B,{theme:"primary",variant:"base",onClick:r,children:"\u518D\u6B21\u7533\u8BF7"}),e(B,{theme:"default",variant:"base",style:{marginLeft:"15px"},onClick:s,children:"\u67E5\u770B\u8FDB\u5EA6"})]})]})})});const{StepItem:ge}=W,I=[{title:"Edit mapping ",content:"\u7533\u8BF7\u63D0\u4EA4\u5DF2\u4E8E12\u670821\u65E5\u63D0\u4EA4",component:ne},{title:"Edit Distribution Info ",content:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5",component:se},{title:"Submit",content:"\u7535\u5B50\u53D1\u7968\u5F00\u51FA\u540E7\u4E2A\u5DE5\u4F5C\u65E5\u5185\u8054\u7CFB",component:ie}],G=l=>{const[u,o]=P.useState(0),r=I[u].component,{goldTableId:s,goldTableName:a}=l,i=L(J),b=y(),{goldTableColumnList:m}=i;c.exports.useEffect(()=>{b(V(s))},[s]);const E=()=>{b(X(null))},g=()=>{o(u+1)},p=()=>{o(u-1)},d=t=>{switch(t){case"back":p();break;case"next":g();break;case"first":o(0);break}};return e("div",{className:T(D.pageWithPadding,D.pageWithColor),children:C(O,{children:[e(W,{current:u,children:I.map(t=>e(ge,{title:t.title},t.title))}),e("div",{style:{marginTop:"52px"},children:e(r,{steps:I,current:u,callback:d,goldTableId:s,goldTableName:a,goldTableColumnList:m,removeinfo:E})})]})})},be=()=>e("div",{className:T(D.pageWithPadding,D.pageWithColor),children:e(G,{})});c.exports.memo(be);const Ee="_content_1f133_1",Ce="_treeContent_1f133_4",he="_search_1f133_9",Fe="_tableContent_1f133_12";var v={content:Ee,treeContent:Ce,search:he,tableContent:Fe};const Be=()=>Q["release"].API,De=async l=>{let o=`${Be()}api/v1/goldTable`;l&&l.name&&(o+=`?tableName=${l.name}`);const s=await(await fetch(o)).json();return console.log("gold LIST resp==>"),console.log(s),s},fe=()=>{const l=y(),[u,o]=c.exports.useState([]);c.exports.useState([]);const[r,s]=c.exports.useState(0),[a,i]=c.exports.useState();c.exports.useState(0);const b=c.exports.useRef(null);L(oe);const m=[];c.exports.useEffect(()=>{De({name:null}).then(p=>{for(let d=0;d<p.length;d++)m.push({label:p[d].goldTable,value:p[d].id,key:p[d].id});o(m)})},[]);const E=g=>{const p=g.node.data.label,d=g.node.data.value;s(d),i(p)};return C("div",{className:T(D.pageWithColor,v.content),children:[C("div",{className:v.treeContent,children:[e(F,{className:v.search,suffixIcon:e(U,{}),onEnter:g=>{l(Y({name:g}))},placeholder:"please search for source/"}),e(le,{data:u,onClick:E,activable:!0,hover:!0,transition:!0,ref:b})]}),e("div",{className:v.tableContent,children:r&&r!=0?e(G,{goldTableId:r,goldTableName:a}):null})]})};var We=P.memo(fe);export{We as default};
