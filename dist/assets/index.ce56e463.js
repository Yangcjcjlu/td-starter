import{r as l,i as he,k as ge,R as N,m as ee,w as be,a8 as ve,j as o,c as k,p as y,a as P,an as Ce,C as ye,o as Oe,I as te,_ as ne,bX as Se,bY as _e,b as $,d as M,F as re,B as j,e as G,bZ as xe,aL as q,u as oe,b_ as Ee,b$ as Pe,c0 as we,c1 as De,c2 as ke,c3 as Ne,bB as Ie,c4 as je}from"./index.2c1de01e.js";import{C as D}from"./common.module.e5e57554.js";import{L as Fe,F as ae}from"./index.3544f977.js";import{T as Te}from"./index.f2c25972.js";import{T as Be}from"./index.7ff4ef5f.js";import"./formModel.7e9be4b9.js";import"./DateRangePicker.c0d7081d.js";import"./index.ba8e3ddb.js";import"./react-render.54adfee5.js";function H(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,r)}return e}function V(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?H(Object(e),!0).forEach(function(r){ge(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):H(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}var Ae={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M20.99 7.38l-10.61 10.6L4 11.63l1.42-1.41 4.95 4.95 9.2-9.2 1.4 1.42z"}}]},se=l.exports.forwardRef(function(t,n){return l.exports.createElement(he,V(V({},t),{},{id:"check",ref:n,icon:Ae}))});se.displayName="CheckIcon";var Le=se;/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var le=N.createContext({current:0,theme:"default",readonly:!1,onChange:null});/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var $e={icon:!0,status:"default"},We={layout:"horizontal",readonly:!1,separator:"line",sequence:"positive",theme:"default"};/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var L=function(n){var e,r=n.index,a=n.icon,g=n.title,b=n.content,c=n.value,p=n.children,v=n.style,s=n.status,m=l.exports.useContext(le),i=m.current,f=m.theme,h=m.onChange,d=m.readonly,S=ee(),u=S.classPrefix,F=S.steps,T=be({CloseIcon:ve,CheckIcon:Le}),O=T.CloseIcon,C=T.CheckIcon,_=s!=="process"&&!d;function x(){if(!a)return null;var w="".concat(u,"-steps-item__icon--number");return a&&a!==!0?o("span",{className:w,children:a}):f!=="default"?null:s==="error"?o("span",{className:w,children:F.errorIcon||o(O,{})}):s==="finish"?o("span",{className:w,children:o(C,{})}):o("span",{className:w,children:Number(r)+1})}function E(w){if(!!_){var fe=c!=null?c:r;h(fe,i,{e:w})}}return o("div",{style:v,className:k((e={},y(e,"".concat(u,"-steps-item"),!0),y(e,"".concat(u,"-steps-item--wait"),s==="default"),y(e,"".concat(u,"-steps-item--error"),s==="error"),y(e,"".concat(u,"-steps-item--finish"),s==="finish"),y(e,"".concat(u,"-steps-item--process"),s==="process"),y(e,n.className,!!n.className),e)),children:P("div",{className:k("".concat(u,"-steps-item__inner"),y({},"".concat(u,"-steps-item--clickable"),_)),onClick:E,children:[o("div",{className:k("".concat(u,"-steps-item__icon"),y({},"".concat(u,"-steps-item-").concat(s),s)),children:x()}),P("div",{className:"".concat(u,"-steps-item__content"),children:[o("div",{className:"".concat(u,"-steps-item__title"),children:g}),o("div",{className:"".concat(u,"-steps-item__description"),children:b}),p?o("div",{className:"".concat(u,"-steps-item__extra"),children:p}):null]})]})})};L.displayName="StepItem";L.defaultProps=$e;/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */function X(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,r)}return e}function B(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?X(Object(e),!0).forEach(function(r){y(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):X(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}var K=Ce(function(t,n){var e,r=t.style,a=t.readonly,g=t.layout,b=t.theme,c=t.sequence,p=t.separator,v=t.children,s=t.options,m=ee(),i=m.classPrefix,f=ye(t,"current",t.onChange),h=Oe(f,2),d=h[0],S=h[1],u=l.exports.useMemo(function(){var O={};return s?s.forEach(function(C,_){C.value!==void 0&&(O[C.value]=_)}):N.Children.forEach(v,function(C,_){!N.isValidElement(C)||C.props.value!==void 0&&(O[C.props.value]=_)}),O},[s,v]),F=l.exports.useCallback(function(O,C){var _;if(d==="FINISH")return"finish";if(O.status&&O.status!=="default")return O.status;if(O.value===void 0&&(c==="positive"&&C<d||c==="reverse"&&C>d))return"finish";if(O.value!==void 0){var x=u[d];if(x===void 0)return console.warn("TDesign Steps Warn: The current `value` is not exist."),"default";if(c==="positive"&&C<x||c==="reverse"&&C>x)return"finish"}var E=(_=O.value)!==null&&_!==void 0?_:C;return E===d?"process":"default"},[d,c,u]),T=l.exports.useMemo(function(){if(s){var O=c==="reverse"?s.reverse():s;return s.map(function(x,E){var w=c==="reverse"?O.length-E-1:E;return o(L,{...B(B({key:E},x),{},{index:w,status:F(x,E)})})})}var C=N.Children.toArray(v),_=c==="reverse"?C.reverse():C;return C.map(function(x,E){var w=c==="reverse"?_.length-E-1:E;return N.cloneElement(x,B(B({},x.props),{},{index:w,status:F(x.props,E)}))})},[s,v,c,F]);return o(le.Provider,{value:{current:d,theme:b,readonly:a,onChange:S},children:o("div",{ref:n,style:r,className:k((e={},y(e,"".concat(i,"-steps"),!0),y(e,"".concat(i,"-steps--").concat(b,"-anchor"),b),y(e,"".concat(i,"-steps--").concat(g),g),y(e,"".concat(i,"-steps--").concat(c),c),y(e,"".concat(i,"-steps--").concat(p,"-separator"),p),y(e,t.className,!!t.className),e)),children:T})})},{StepItem:L});K.displayName="Steps";K.defaultProps=We;/**
 * tdesign v1.2.4
 * (c) 2023 tdesign
 * @license MIT
 */var ce=K;function Y(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,r)}return e}function J(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?Y(Object(e),!0).forEach(function(r){ne(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Y(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}var ze={tag:"svg",attrs:{fill:"none",viewBox:"0 0 16 16",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M8 15A7 7 0 108 1a7 7 0 000 14zM4.5 8.2l.7-.7L7 9.3l3.8-3.8.7.7L7 10.7 4.5 8.2z",fillOpacity:.9}}]},ie=l.exports.forwardRef(function(t,n){return l.exports.createElement(te,J(J({},t),{},{id:"check-circle-filled",ref:n,icon:ze}))});ie.displayName="CheckCircleFilledIcon";function Z(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,r)}return e}function Q(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?Z(Object(e),!0).forEach(function(r){ne(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Z(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}var Re={tag:"svg",attrs:{fill:"none",viewBox:"0 0 16 16",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4.5 8.2L7 10.7l4.5-4.5-.7-.7L7 9.3 5.2 7.5l-.7.7z",fillOpacity:.9}},{tag:"path",attrs:{fill:"currentColor",d:"M4.11 2.18a7 7 0 117.78 11.64A7 7 0 014.1 2.18zm.56 10.8a6 6 0 106.66-9.97A6 6 0 004.67 13z",fillOpacity:.9}}]},ue=l.exports.forwardRef(function(t,n){return l.exports.createElement(te,Q(Q({},t),{},{id:"check-circle",ref:n,icon:Re}))});ue.displayName="CheckCircleIcon";const de="datasource/listSelect",U={loading:!0,current:1,pageSize:10,total:0,datasourceList:[]},W=Se(`${de}/getMockList`,async t=>{const n=new Promise((r,a)=>{r(t.list)});let e=null;return await n.then(r=>{e=r}),{list:e,total:0,pageSize:t.pageSize,current:t.current}});_e({name:de,initialState:U,reducers:{clearPageState:()=>U},extraReducers:t=>{t.addCase(W.pending,n=>{n.loading=!0}).addCase(W.fulfilled,(n,e)=>{var r,a,g,b;console.log("action!"),console.log(e),console.log("state"),console.log(n),n.loading=!1,n.datasourceList=((r=e.payload)==null?void 0:r.list)||[],n.total=(a=e.payload)==null?void 0:a.total,n.pageSize=(g=e.payload)==null?void 0:g.pageSize,n.current=(b=e.payload)==null?void 0:b.current}).addCase(W.rejected,n=>{n.loading=!1})}});const Me=t=>t.ListSelectDataSource;const pe=t=>{const{deleteColumn:n,getCurrentColumnList:e,editColumn:r}=t;$(),l.exports.useRef(null);const a=new Array(5).fill(null).map((f,h)=>({id:String(h+1),goldTable:["table1","table2","table3"][h%3],status:h%3,goldColumn:["column1","column2","column3","column4","column5"][h%4],letters:[["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528","algolia \u670D\u52A1\u62A5\u9500"]][h%4],createTime:["2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01"][h%4]})),[g,b]=l.exports.useState([...a]),[c,p]=l.exports.useState({}),{goldTableColumnList:v}=t;l.exports.useEffect(()=>{b(v||[...a])},[v]),l.exports.useEffect(()=>{e(v)},[v]);const s=f=>f.index!==2,m=f=>{console.log(f);const{id:h}=f.currentTarget.dataset;n(h)},i=l.exports.useMemo(()=>[{title:"Table name",colKey:"goldTable",align:"left"},{title:"column name",colKey:"goldColumn",align:"left"},{title:"distribution name",colKey:"subscrColumn",width:280,edit:{component:M,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:f=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",f)},onEnter:h=>{var d;(d=h==null?void 0:h.e)==null||d.preventDefault(),console.log("onEnter",h)}}),abortEditOnEvent:["onEnter"],onEdited:f=>{r(f.newRowData)},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!0},{title:"Operation",colKey:"operate",cell:({row:f})=>o("div",{className:"table-operations",children:o("div",{children:o(Fe,{theme:"primary",hover:"color","data-id":f.id,onClick:m,children:"delete"})})})}],[g,c]);return o(Te,{rowKey:"key",columns:i,data:g,editableCellState:s,bordered:!0,lazyLoad:!0})},Ge=()=>o("div",{className:k(D.pageWithPadding,D.pageWithColor),children:o(pe,{})});l.exports.memo(Ge);var Ke=l.exports.memo(t=>{const{callback:n,removeinfo:e,editInfo:r}=t,{goldTableId:a,goldTableName:g,goldTableColumnList:b}=t,c=()=>{n("next")};return P(re,{children:[o(pe,{goldTableColumnList:b,deleteColumn:i=>{e(i)},getCurrentColumnList:i=>{console.log("getCurrentColumnList==>"),console.log(JSON.stringify)},editColumn:i=>{r(i)}}),o("div",{style:{marginTop:"10px"},children:o(j,{type:"submit",onClick:()=>c(),children:"Next Step"})})]})});const{FormItem:z}=ae;var qe=l.exports.memo(t=>{const{current:n,callback:e,steps:r=[],goldTableName:a,goldTableId:g,submitInfo:b}=t;$(),G(xe);const c=l.exports.useRef(),{Option:p}=q,v=()=>{var i,f;const m=(f=(i=c.current)==null?void 0:i.getFieldsValue)==null?void 0:f.call(i,!0);b(m)},s=()=>{e("back")};return P(ae,{ref:c,labelWidth:100,children:[o(z,{label:"Distribution Name",name:"subscr",children:o(M,{style:{marginLeft:20},placeholder:"Please Enter"})}),o(z,{label:"Distribution Type",name:"distributionType",children:P(q,{style:{marginLeft:20},value:"A",placeholder:"please select distribution type",children:[o(p,{label:"CSV",value:"A"},"A"),o(p,{label:"EXCEL",value:"B"},"B"),o(p,{label:"PDF",value:"C"},"C")]})}),P(z,{children:[o(j,{type:"submit",onClick:()=>v(),children:"Submit"}),o(j,{style:{margin:"0 8px"},onClick:()=>s(),children:"Go back"})]})]})});const He="_stepFourWrapper_1790c_1",Ve="_icon_1790c_4",Xe="_title_1790c_8",Ye="_Content_1790c_13",Je="_description_1790c_31",Ze="_rightButton_1790c_37";var I={stepFourWrapper:He,icon:Ve,title:Xe,Content:Ye,description:Je,rightButton:Ze},Qe=l.exports.memo(t=>{const n=oe(),e=()=>{n("/")};return P("div",{className:I.Content,children:[o(ue,{className:I.icon}),o("div",{className:I.title,children:"Success"}),o("div",{className:I.description,children:"You can go back now"}),o("div",{children:o(j,{onClick:e,children:"go back to homepage"})})]})});l.exports.memo(t=>{const n=oe(),{callback:e}=t,r=()=>{e("first")},a=()=>{n("/detail/advanced")};return o("div",{className:I.stepFourWrapper,children:P("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[o(ie,{className:I.icon}),o("div",{className:I.title,children:"\u5B8C\u6210\u5F00\u7968\u7533\u8BF7"}),o("p",{children:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5\u4F1A\u5C06\u7535\u5B50\u53D1\u7968\u53D1\u81F3\u90AE\u7BB1\uFF0C\u53D1\u7968\u90AE\u5BC4\u8BF7\u8010\u5FC3\u7B49\u5F85"}),P("div",{className:"tdesign-demo-block-column",style:{marginTop:"20px"},children:[o(j,{theme:"primary",variant:"base",onClick:r,children:"\u518D\u6B21\u7533\u8BF7"}),o(j,{theme:"default",variant:"base",style:{marginLeft:"15px"},onClick:a,children:"\u67E5\u770B\u8FDB\u5EA6"})]})]})})});const{StepItem:Ue}=ce,R=[{title:"Edit mapping ",content:"\u7533\u8BF7\u63D0\u4EA4\u5DF2\u4E8E12\u670821\u65E5\u63D0\u4EA4",component:Ke},{title:"Edit Distribution Info ",content:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5",component:qe},{title:"Submit",content:"\u7535\u5B50\u53D1\u7968\u5F00\u51FA\u540E7\u4E2A\u5DE5\u4F5C\u65E5\u5185\u8054\u7CFB",component:Qe}],me=t=>{const[n,e]=N.useState(0),r=R[n].component,{goldTableId:a,goldTableName:g}=t,b=G(Ee),c=$(),{goldTableColumnList:p}=b;l.exports.useEffect(()=>{c(Pe(a))},[a]);const v=d=>{const S=[];for(let u=0;u<p.length;u++)p[u].id!=d&&S.push(p[u]);c(we(S))},s=d=>{const S=[];for(let u=0;u<p.length;u++)d.id==p[u].id?S.push(d):S.push(p[u]);c(De(S))},m=()=>{e(n+1)},i=d=>{let S={subscr:d.subscr,distributionType:d.distributionType,goldTableColumnList:p,goldTableId:a,goldTableName:g};c(ke(S)),m()},f=()=>{e(n-1)},h=d=>{switch(d){case"back":f();break;case"next":m();break;case"first":e(0);break}};return o("div",{className:k(D.pageWithPadding,D.pageWithColor),children:P(re,{children:[o(ce,{current:n,children:R.map(d=>o(Ue,{title:d.title},d.title))}),o("div",{style:{marginTop:"52px"},children:o(r,{steps:R,current:n,callback:h,goldTableId:a,goldTableName:g,editInfo:s,submitInfo:i,goldTableColumnList:p,removeinfo:v})})]})})},et=()=>o("div",{className:k(D.pageWithPadding,D.pageWithColor),children:o(me,{})});l.exports.memo(et);const tt="_content_1f133_1",nt="_treeContent_1f133_4",rt="_search_1f133_9",ot="_tableContent_1f133_12";var A={content:tt,treeContent:nt,search:rt,tableContent:ot};const at=()=>Ne["release"].API,st=async t=>{let e=`${at()}api/v1/goldTable`;t&&t.name&&(e+=`?tableName=${t.name}`);const a=await(await fetch(e)).json();return console.log("gold LIST resp==>"),console.log(a),a},lt=()=>{const t=$(),[n,e]=l.exports.useState([]);l.exports.useState([]);const[r,a]=l.exports.useState(0),[g,b]=l.exports.useState();l.exports.useState(0);const c=l.exports.useRef(null);G(Me);const p=[];l.exports.useEffect(()=>{st({name:null}).then(m=>{for(let i=0;i<m.length;i++)p.push({label:m[i].goldTable,value:m[i].id,key:m[i].id});e(p)})},[]);const v=s=>{const m=s.node.data.label,i=s.node.data.value;a(i),b(m)};return P("div",{className:k(D.pageWithPadding,D.pageWithColor,D.pageWithSize,A.content),children:[P("div",{className:A.treeContent,children:[o(M,{className:A.search,suffixIcon:o(Ie,{}),onEnter:s=>{t(je({name:s}))},placeholder:"please search for source/"}),o(Be,{data:n,onClick:v,activable:!0,hover:!0,transition:!0,ref:c})]}),o("div",{className:A.tableContent,children:r&&r!=0?o(me,{goldTableId:r,goldTableName:g}):null})]})};var bt=N.memo(lt);export{bt as default};
