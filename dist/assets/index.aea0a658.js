import{c3 as j,c4 as K,r as c,b as y,d as F,c5 as z,j as e,c as T,a as C,F as O,B,e as L,c6 as M,aK as S,c7 as $,u as H,R as P,c8 as J,c9 as V,ca as X,bA as Q,cb as U}from"./index.91378ad2.js";import{C as D}from"./common.module.d7e709a7.js";import{M as v}from"./index.4af14440.js";import{L as Y,F as _}from"./index.56607e43.js";import{T as Z}from"./index.963be225.js";import{T as ee,C as te,S as W}from"./check-circle-filled.31ad06dc.js";import{T as ue}from"./index.1b05c30e.js";import"./formModel.a6a83887.js";import"./react-render.41054dd1.js";import"./image.e16bd38c.js";import"./DateRangePicker.25de2ce4.js";import"./index.7b0bf6d2.js";import"./useDebounce.f1e3b9dd.js";import"./observe.3c3f0282.js";const q="datasource/listSelect",w={loading:!0,current:1,pageSize:10,total:0,datasourceList:[]},k=j(`${q}/getMockList`,async l=>{const t=new Promise((r,a)=>{r(l.list)});let o=null;return await t.then(r=>{o=r}),{list:o,total:0,pageSize:l.pageSize,current:l.current}});K({name:q,initialState:w,reducers:{clearPageState:()=>w},extraReducers:l=>{l.addCase(k.pending,t=>{t.loading=!0}).addCase(k.fulfilled,(t,o)=>{var r,a,n,d;console.log("action!"),console.log(o),console.log("state"),console.log(t),t.loading=!1,t.datasourceList=((r=o.payload)==null?void 0:r.list)||[],t.total=(a=o.payload)==null?void 0:a.total,t.pageSize=(n=o.payload)==null?void 0:n.pageSize,t.current=(d=o.payload)==null?void 0:d.current}).addCase(k.rejected,t=>{t.loading=!1})}});const le=l=>l.ListSelectDataSource;const R=l=>{const{deleteColumn:t,getCurrentColumnList:o}=l,r=y();c.exports.useRef(null);const a=new Array(5).fill(null).map((u,s)=>({id:String(s+1),goldTable:["table1","table2","table3"][s%3],status:s%3,goldColumn:["column1","column2","column3","column4","column5"][s%4],letters:[["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528","algolia \u670D\u52A1\u62A5\u9500"]][s%4],createTime:["2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01"][s%4]})),[n,d]=c.exports.useState([...a]),[b,m]=c.exports.useState({}),{goldTableColumnList:g}=l;c.exports.useEffect(()=>{d(g||[...a])},[g]),c.exports.useEffect(()=>{o(g)},[g]);const E=u=>u.index!==2,p=u=>{console.log(u);const{id:s}=u.currentTarget.dataset;t(s)},i=c.exports.useMemo(()=>[{title:"Table name",colKey:"goldTable",align:"left",edit:{component:F,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:u=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",u)},onEnter:s=>{var h;(h=s==null?void 0:s.e)==null||h.preventDefault(),console.log("onEnter",s)}}),abortEditOnEvent:["onEnter"],onEdited:u=>{n.splice(u.rowIndex,1,u.newRowData),d([...n]),console.log("Edit firstName:",u),v.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!0},{title:"column name",colKey:"goldColumn",align:"left",edit:{component:F,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:u=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",u)},onEnter:s=>{var h;(h=s==null?void 0:s.e)==null||h.preventDefault(),console.log("onEnter",s)}}),abortEditOnEvent:["onEnter"],onEdited:u=>{n.splice(u.rowIndex,1,u.newRowData),d([...n]),console.log("Edit firstName:",u),v.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!1},{title:"distribution name",colKey:"distributionName",width:280,edit:{component:F,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:u=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",u)},onEnter:s=>{var h;(h=s==null?void 0:s.e)==null||h.preventDefault(),console.log("onEnter",s)}}),abortEditOnEvent:["onEnter"],onEdited:u=>{console.log("context==>"+JSON.stringify(u)),console.log("data=>"+JSON.stringify(n)),r(z(n,u.rowIndex,u.newRowData)),d([...n]),console.log("Edit firstName:",u),v.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!0},{title:"Operation",colKey:"operate",cell:({row:u})=>e("div",{className:"table-operations",children:e("div",{children:e(Y,{theme:"primary",hover:"color","data-id":u.id,onClick:p,children:"delete"})})})}],[n,b]);return e(Z,{rowKey:"key",columns:i,data:n,editableCellState:E,bordered:!0,lazyLoad:!0})},oe=()=>e("div",{className:T(D.pageWithPadding,D.pageWithColor),children:e(R,{})});c.exports.memo(oe);var ae=c.exports.memo(l=>{const{callback:t}=l,{goldTableId:o,goldTableName:r,goldTableColumnList:a}=l,n=()=>{t("next")};return C(O,{children:[e(R,{goldTableColumnList:a,deleteColumn:g=>{},getCurrentColumnList:g=>{console.log("getCurrentColumnList==>"),console.log(JSON.stringify)}}),e("div",{style:{marginTop:"10px"},children:e(B,{type:"submit",onClick:()=>n(),children:"Next Step"})})]})});const{FormItem:x}=_;var ne=c.exports.memo(l=>{const{current:t,callback:o,steps:r=[],goldTableName:a,goldTableId:n}=l,d=y();L(M);const b=c.exports.useRef(),{Option:m}=S,g=()=>{var i,u;const p=(u=(i=b.current)==null?void 0:i.getFieldsValue)==null?void 0:u.call(i,!0);p.goldTableId=n,p.goldTableName=a,d($(p)),v.success("Success")},E=()=>{o("back")};return C(_,{ref:b,labelWidth:100,children:[e(x,{label:"Distribution Name",name:"subscr",children:e(F,{style:{marginLeft:20},placeholder:"Please Enter"})}),e(x,{label:"Distribution Type",name:"distributionType",children:C(S,{style:{marginLeft:20},value:"A",placeholder:"please select distribution type",children:[e(m,{label:"CSV",value:"A"},"A"),e(m,{label:"EXCEL",value:"B"},"B"),e(m,{label:"PDF",value:"C"},"C")]})}),C(x,{children:[e(B,{type:"submit",onClick:()=>g(),children:"Submit"}),e(B,{style:{margin:"0 8px"},onClick:()=>E(),children:"Go back"})]})]})});const{FormItem:f}=_,{Option:se}=S,re=[{label:"\u5E7F\u4E1C\u7701\u6DF1\u5733\u5E02\u5357\u5C71\u533A",value:"0"},{label:"\u5317\u4EAC\u5E02\u6D77\u6DC0\u533A",value:"1"},{label:"\u56DB\u5DDD\u7701\u6210\u90FD\u5E02\u9AD8\u65B0\u533A",value:"2"},{label:"\u5E7F\u4E1C\u7701\u5E7F\u5DDE\u5E02\u5929\u6CB3\u533A",value:"3"},{label:"\u9655\u897F\u7701\u897F\u5B89\u5E02\u9AD8\u65B0\u533A",value:"4"}];var ce=c.exports.memo(l=>{const{current:t,callback:o,steps:r}=l,a=()=>{o("next")},n=()=>{o("back")};return C(_,{labelWidth:100,children:[e(f,{label:"\u6536\u8D27\u4EBA",name:"receiver",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA",type:"error"}],children:e(F,{placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA"})}),e(f,{label:"\u6536\u8D27\u4EBA\u624B\u673A\u53F7",name:"receiverPhone",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u624B\u673A\u53F7",type:"error"}],children:e(F,{placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u624B\u673A\u53F7\u53F7"})}),e(f,{label:"\u6536\u8D27\u5730\u5740",name:"receiverAddress",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740",type:"error"}],children:e(S,{value:"3",placeholder:"\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740",children:re.map(d=>{const{label:b,value:m}=d;return e(se,{label:b,value:m},m)})})}),e(f,{label:"\u8BE6\u7EC6\u5730\u5740",name:"taxpayerId",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",type:"error"}],children:e(ee,{placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",value:"\u54C8\u54C8\u54C8"})}),C(f,{children:[t<r.length-1&&e(B,{type:"submit",onClick:()=>a(),children:"\u4E0B\u4E00\u6B65"}),t>0&&e(B,{style:{margin:"0 8px"},onClick:()=>n(),children:"\u4E0A\u4E00\u6B65"})]})]})});const ie="_stepFourWrapper_27q4d_1",de="_icon_27q4d_4",pe="_title_27q4d_8";var N={stepFourWrapper:ie,icon:de,title:pe};c.exports.memo(l=>{const t=H(),{callback:o}=l,r=()=>{o("first")},a=()=>{t("/detail/advanced")};return e("div",{className:N.stepFourWrapper,children:C("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e(te,{className:N.icon}),e("div",{className:N.title,children:"\u5B8C\u6210\u5F00\u7968\u7533\u8BF7"}),e("p",{children:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5\u4F1A\u5C06\u7535\u5B50\u53D1\u7968\u53D1\u81F3\u90AE\u7BB1\uFF0C\u53D1\u7968\u90AE\u5BC4\u8BF7\u8010\u5FC3\u7B49\u5F85"}),C("div",{className:"tdesign-demo-block-column",style:{marginTop:"20px"},children:[e(B,{theme:"primary",variant:"base",onClick:r,children:"\u518D\u6B21\u7533\u8BF7"}),e(B,{theme:"default",variant:"base",style:{marginLeft:"15px"},onClick:a,children:"\u67E5\u770B\u8FDB\u5EA6"})]})]})})});const{StepItem:me}=W,I=[{title:"Edit mapping ",content:"\u7533\u8BF7\u63D0\u4EA4\u5DF2\u4E8E12\u670821\u65E5\u63D0\u4EA4",component:ae},{title:"Edit Distribution Info ",content:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5",component:ne},{title:"Submit",content:"\u7535\u5B50\u53D1\u7968\u5F00\u51FA\u540E7\u4E2A\u5DE5\u4F5C\u65E5\u5185\u8054\u7CFB",component:ce}],G=l=>{const[t,o]=P.useState(0),r=I[t].component,{goldTableId:a,goldTableName:n}=l,d=L(J),b=y(),{goldTableColumnList:m}=d;c.exports.useEffect(()=>{b(V(a))},[a]);const g=()=>{o(t+1)},E=()=>{o(t-1)},p=i=>{switch(i){case"back":E();break;case"next":g();break;case"first":o(0);break}};return e("div",{className:T(D.pageWithPadding,D.pageWithColor),children:C(O,{children:[e(W,{current:t,children:I.map(i=>e(me,{title:i.title},i.title))}),e("div",{style:{marginTop:"52px"},children:e(r,{steps:I,current:t,callback:p,goldTableId:a,goldTableName:n,goldTableColumnList:m})})]})})},ge=()=>e("div",{className:T(D.pageWithPadding,D.pageWithColor),children:e(G,{})});c.exports.memo(ge);const be="_content_1f133_1",Ee="_treeContent_1f133_4",Ce="_search_1f133_9",he="_tableContent_1f133_12";var A={content:be,treeContent:Ee,search:Ce,tableContent:he};const Fe=()=>X["release"].API,Be=async l=>{let o=`${Fe()}api/v1/goldTable`;l&&l.name&&(o+=`?tableName=${l.name}`);const a=await(await fetch(o)).json();return console.log("gold LIST resp==>"),console.log(a),a},De=()=>{const l=y(),[t,o]=c.exports.useState([]);c.exports.useState([]);const[r,a]=c.exports.useState(0),[n,d]=c.exports.useState();c.exports.useState(0);const b=c.exports.useRef(null);L(le);const m=[];c.exports.useEffect(()=>{Be({name:null}).then(p=>{for(let i=0;i<p.length;i++)m.push({label:p[i].goldTable,value:p[i].id,key:p[i].id});o(m)})},[]);const g=E=>{const p=E.node.data.label,i=E.node.data.value;a(i),d(p)};return C("div",{className:T(D.pageWithColor,A.content),children:[C("div",{className:A.treeContent,children:[e(F,{className:A.search,suffixIcon:e(Q,{}),onEnter:E=>{l(U({name:E}))},placeholder:"please search for source/"}),e(ue,{data:t,onClick:g,activable:!0,hover:!0,transition:!0,ref:b})]}),e("div",{className:A.tableContent,children:r&&r!=0?e(G,{goldTableId:r,goldTableName:n}):null})]})};var Pe=P.memo(De);export{Pe as default};
