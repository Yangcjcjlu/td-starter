import{cf as P,cg as R,r,d as E,j as e,c as v,f as x,ch as j,b as z,ci as G,a as m,F as I,B as h,aO as f,u as K,R as N,cj as M,c2 as $}from"./index.0cd7d595.js";import{C}from"./common.module.d7e709a7.js";import{M as D}from"./index.52f81990.js";import{L as H,F as A}from"./index.51831cd8.js";import{T as V}from"./index.1cdcffb5.js";import{T as X}from"./index.f132be0c.js";import{C as J,S as L}from"./check-circle-filled.38e7c82c.js";import{T as Q}from"./index.2aacd57f.js";import"./formModel.115f8019.js";import"./react-render.419ba009.js";import"./image.f2b984a5.js";import"./DateRangePicker.f1c98900.js";import"./index.10eff2da.js";import"./useDebounce.258df8e3.js";import"./observe.3c3f0282.js";const w="datasource/listSelect",k={loading:!0,current:1,pageSize:10,total:0,datasourceList:[]},S=P(`${w}/getMockList`,async o=>{const u=new Promise((n,s)=>{n(o.list)});let t=null;return await u.then(n=>{t=n}),{list:t,total:0,pageSize:o.pageSize,current:o.current}});R({name:w,initialState:k,reducers:{clearPageState:()=>k},extraReducers:o=>{o.addCase(S.pending,u=>{u.loading=!0}).addCase(S.fulfilled,(u,t)=>{var n,s,i,d;console.log("action!"),console.log(t),console.log("state"),console.log(u),u.loading=!1,u.datasourceList=((n=t.payload)==null?void 0:n.list)||[],u.total=(s=t.payload)==null?void 0:s.total,u.pageSize=(i=t.payload)==null?void 0:i.pageSize,u.current=(d=t.payload)==null?void 0:d.current}).addCase(S.rejected,u=>{u.loading=!1})}});const U=o=>o.ListSelectDataSource;const O=o=>{const{deleteColumn:u}=o;r.exports.useRef(null);const t=new Array(5).fill(null).map((l,a)=>({id:String(a+1),goldTable:["table1","table2","table3"][a%3],status:a%3,goldColumn:["column1","column2","column3","column4","column5"][a%4],letters:[["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528"],["\u5BA3\u4F20\u7269\u6599\u5236\u4F5C\u8D39\u7528","algolia \u670D\u52A1\u62A5\u9500"]][a%4],createTime:["2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01"][a%4]})),[n,s]=r.exports.useState([...t]),[i,d]=r.exports.useState({}),{goldTableColumnList:p}=o;r.exports.useEffect(()=>{console.log("goldTableColumnList==>"),console.log(p),s(p.data||[...t])},[p]);const c=l=>l.index!==2,g=l=>{console.log(l);const{id:a}=l.currentTarget.dataset;console.log("id==>"+a),u(a)},q=r.exports.useMemo(()=>[{title:"Table name",colKey:"goldTable",align:"left",edit:{component:E,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:l=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",l)},onEnter:a=>{var b;(b=a==null?void 0:a.e)==null||b.preventDefault(),console.log("onEnter",a)}}),abortEditOnEvent:["onEnter"],onEdited:l=>{n.splice(l.rowIndex,1,l.newRowData),s([...n]),console.log("Edit firstName:",l),D.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!0},{title:"column name",colKey:"goldColumn",align:"left",edit:{component:E,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:l=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",l)},onEnter:a=>{var b;(b=a==null?void 0:a.e)==null||b.preventDefault(),console.log("onEnter",a)}}),abortEditOnEvent:["onEnter"],onEdited:l=>{n.splice(l.rowIndex,1,l.newRowData),s([...n]),console.log("Edit firstName:",l),D.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!1},{title:"distribution name",colKey:"distributionName",cell:({row:l})=>{var a;return(a=l==null?void 0:l.distributionName)==null?void 0:a.join("\u3001")},width:280,edit:{component:E,props:{clearable:!0,autofocus:!0},validateTrigger:"change",on:l=>({onBlur:()=>{console.log("\u5931\u53BB\u7126\u70B9",l)},onEnter:a=>{var b;(b=a==null?void 0:a.e)==null||b.preventDefault(),console.log("onEnter",a)}}),abortEditOnEvent:["onEnter"],onEdited:l=>{n.splice(l.rowIndex,1,l.newRowData),s([...n]),console.log("Edit firstName:",l),D.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:10,message:"\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 10",type:"warning"}]},defaultEditable:!0},{title:"Operation",colKey:"operate",cell:({row:l})=>e("div",{className:"table-operations",children:e("div",{children:e(H,{theme:"primary",hover:"color","data-id":l.id,onClick:g,children:"delete"})})})}],[n,i]);return e(V,{rowKey:"key",columns:q,data:n,editableCellState:c,bordered:!0,lazyLoad:!0})},Y=()=>e("div",{className:v(C.pageWithPadding,C.pageWithColor),children:e(O,{})});r.exports.memo(Y);var Z=r.exports.memo(o=>{const{callback:u}=o,{goldTableId:t}=o,n=()=>{u("next")},s=g=>{console.log(g)},i=x(j),d=z(),{goldTableColumnList:p}=i;return r.exports.useEffect(()=>(console.log("goldTableId==>"),console.log(t),d(G(t)),()=>{}),[t]),m(I,{children:[e(O,{goldTableColumnList:p,deleteColumn:s}),e("div",{style:{marginTop:"10px"},children:e(h,{type:"submit",onClick:()=>n(),children:"Next Step"})})]})});const{FormItem:y}=A;var ee=r.exports.memo(o=>{const{current:u,callback:t,steps:n=[]}=o,{Option:s}=f,i=()=>{D.success("Success")},d=()=>{t("back")};return m(A,{labelWidth:100,children:[e(y,{label:"Distribution Name",name:"distributionName",children:e(E,{style:{marginLeft:20},placeholder:"Please Enter"})}),e(y,{label:"Distribution Type",name:"distributionType",children:m(f,{style:{marginLeft:20},value:"A",placeholder:"please select distribution type",children:[e(s,{label:"CSV",value:"A"},"A"),e(s,{label:"EXCEL",value:"B"},"B"),e(s,{label:"\u516C\u53F8C",value:"C"},"C")]})}),m(y,{children:[e(h,{type:"submit",onClick:()=>i(),children:"Submit"}),e(h,{style:{margin:"0 8px"},onClick:()=>d(),children:"Go back"})]})]})});const{FormItem:F}=A,{Option:te}=f,ue=[{label:"\u5E7F\u4E1C\u7701\u6DF1\u5733\u5E02\u5357\u5C71\u533A",value:"0"},{label:"\u5317\u4EAC\u5E02\u6D77\u6DC0\u533A",value:"1"},{label:"\u56DB\u5DDD\u7701\u6210\u90FD\u5E02\u9AD8\u65B0\u533A",value:"2"},{label:"\u5E7F\u4E1C\u7701\u5E7F\u5DDE\u5E02\u5929\u6CB3\u533A",value:"3"},{label:"\u9655\u897F\u7701\u897F\u5B89\u5E02\u9AD8\u65B0\u533A",value:"4"}];var le=r.exports.memo(o=>{const{current:u,callback:t,steps:n}=o,s=()=>{t("next")},i=()=>{t("back")};return m(A,{labelWidth:100,children:[e(F,{label:"\u6536\u8D27\u4EBA",name:"receiver",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA",type:"error"}],children:e(E,{placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA"})}),e(F,{label:"\u6536\u8D27\u4EBA\u624B\u673A\u53F7",name:"receiverPhone",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u624B\u673A\u53F7",type:"error"}],children:e(E,{placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u624B\u673A\u53F7\u53F7"})}),e(F,{label:"\u6536\u8D27\u5730\u5740",name:"receiverAddress",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740",type:"error"}],children:e(f,{value:"3",placeholder:"\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740",children:ue.map(d=>{const{label:p,value:c}=d;return e(te,{label:p,value:c},c)})})}),e(F,{label:"\u8BE6\u7EC6\u5730\u5740",name:"taxpayerId",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",type:"error"}],children:e(X,{placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",value:"\u54C8\u54C8\u54C8"})}),m(F,{children:[u<n.length-1&&e(h,{type:"submit",onClick:()=>s(),children:"\u4E0B\u4E00\u6B65"}),u>0&&e(h,{style:{margin:"0 8px"},onClick:()=>i(),children:"\u4E0A\u4E00\u6B65"})]})]})});const oe="_stepFourWrapper_27q4d_1",ne="_icon_27q4d_4",ae="_title_27q4d_8";var T={stepFourWrapper:oe,icon:ne,title:ae};r.exports.memo(o=>{const u=K(),{callback:t}=o,n=()=>{t("first")},s=()=>{u("/detail/advanced")};return e("div",{className:T.stepFourWrapper,children:m("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e(J,{className:T.icon}),e("div",{className:T.title,children:"\u5B8C\u6210\u5F00\u7968\u7533\u8BF7"}),e("p",{children:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5\u4F1A\u5C06\u7535\u5B50\u53D1\u7968\u53D1\u81F3\u90AE\u7BB1\uFF0C\u53D1\u7968\u90AE\u5BC4\u8BF7\u8010\u5FC3\u7B49\u5F85"}),m("div",{className:"tdesign-demo-block-column",style:{marginTop:"20px"},children:[e(h,{theme:"primary",variant:"base",onClick:n,children:"\u518D\u6B21\u7533\u8BF7"}),e(h,{theme:"default",variant:"base",style:{marginLeft:"15px"},onClick:s,children:"\u67E5\u770B\u8FDB\u5EA6"})]})]})})});const{StepItem:se}=L,_=[{title:"Edit mapping ",content:"\u7533\u8BF7\u63D0\u4EA4\u5DF2\u4E8E12\u670821\u65E5\u63D0\u4EA4",component:Z},{title:"Edit Distribution Info ",content:"\u9884\u8BA11\uFF5E3\u4E2A\u5DE5\u4F5C\u65E5",component:ee},{title:"Submit",content:"\u7535\u5B50\u53D1\u7968\u5F00\u51FA\u540E7\u4E2A\u5DE5\u4F5C\u65E5\u5185\u8054\u7CFB",component:le}],W=o=>{const[u,t]=N.useState(0),n=_[u].component,{goldTableId:s}=o,i=()=>{t(u+1)},d=()=>{t(u-1)},p=c=>{switch(c){case"back":d();break;case"next":i();break;case"first":t(0);break}};return e("div",{className:v(C.pageWithPadding,C.pageWithColor),children:m(I,{children:[e(L,{current:u,children:_.map(c=>e(se,{title:c.title},c.title))}),e("div",{style:{marginTop:"52px"},children:e(n,{steps:_,current:u,callback:p,goldTableId:s})})]})})},re=()=>e("div",{className:v(C.pageWithPadding,C.pageWithColor),children:e(W,{})});r.exports.memo(re);const ce="_content_1f133_1",ie="_treeContent_1f133_4",de="_search_1f133_9",pe="_tableContent_1f133_12";var B={content:ce,treeContent:ie,search:de,tableContent:pe};const me=()=>M["release"].API,ge=async o=>{let t=`${me()}api/v1/goldTable`;o&&o.name&&(t+=`?tableName=${o.name}`);const s=await(await fetch(t)).json();return console.log("gold LIST resp==>"),console.log(s),s},be=()=>{const[o,u]=r.exports.useState([]);r.exports.useState([]);const[t,n]=r.exports.useState(0);r.exports.useState(0);const s=r.exports.useRef(null);x(U);const i=[];r.exports.useEffect(()=>{ge({name:null}).then(c=>{for(let g=0;g<c.length;g++)i.push({label:c[g].goldTable,value:c[g].id,key:c[g].id});u(i)})},[]);const d=p=>{const c=p.node.data.value;n(c)};return m("div",{className:v(C.pageWithColor,B.content),children:[m("div",{className:B.treeContent,children:[e(E,{className:B.search,suffixIcon:e($,{}),placeholder:"please search for source/"}),e(Q,{data:o,onClick:d,activable:!0,hover:!0,transition:!0,ref:s})]}),e("div",{className:B.tableContent,children:t&&t!=0?e(W,{goldTableId:t}):null})]})};var Ie=N.memo(be);export{Ie as default};
